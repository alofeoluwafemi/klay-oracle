package main

import (
	"github.com/alofeoluwafemi/klay-oracle/node"
	"log"
	"os"
	"path/filepath"
)

func main() {
	jobsDir := os.Getenv("JOBS_PATH")

	wd, err := os.Getwd()
	if err != nil {
		log.Fatalf("%v", err)
	}

	jobsPath := filepath.Join(wd, jobsDir)

	node.Boot(jobsPath)
	node.Run()

	//h := common.HexToHash("{\"RAW\":{\"ETH\":{\"USD\":{\"TYPE\":\"5\",\"MARKET\":\"CCCAGG\",\"FROMSYMBOL\":\"ETH\",\"TOSYMBOL\":\"USD\",\"FLAGS\":\"2052\",\"PRICE\":1286.28,\"LASTUPDATE\":1664759324,\"MEDIAN\":1286.216,\"LASTVOLUME\":0.69,\"LASTVOLUMETO\":886.9605,\"LASTTRADEID\":\"14326775\",\"VOLUMEDAY\":61991.800612465144,\"VOLUMEDAYTO\":79153635.81971389,\"VOLUME24HOUR\":454367.71197218,\"VOLUME24HOURTO\":587700307.0431802,\"OPENDAY\":1276.71,\"HIGHDAY\":1286.65,\"LOWDAY\":1265.42,\"OPEN24HOUR\":1307.86,\"HIGH24HOUR\":1317.79,\"LOW24HOUR\":1262.94,\"LASTMARKET\":\"lmax\",\"VOLUMEHOUR\":4689.132520440008,\"VOLUMEHOURTO\":6022848.729907851,\"OPENHOUR\":1281.74,\"HIGHHOUR\":1286.65,\"LOWHOUR\":1281.48,\"TOPTIERVOLUME24HOUR\":454367.71197218,\"TOPTIERVOLUME24HOURTO\":587700307.0431802,\"CHANGE24HOUR\":-21.579999999999927,\"CHANGEPCT24HOUR\":-1.6500237028428066,\"CHANGEDAY\":9.569999999999936,\"CHANGEPCTDAY\":0.7495829123293415,\"CHANGEHOUR\":4.539999999999964,\"CHANGEPCTHOUR\":0.35420600121709267,\"CONVERSIONTYPE\":\"direct\",\"CONVERSIONSYMBOL\":\"\",\"SUPPLY\":122627429.499,\"MKTCAP\":157733210015.97372,\"MKTCAPPENALTY\":0,\"CIRCULATINGSUPPLY\":122627429.499,\"CIRCULATINGSUPPLYMKTCAP\":157733210015.97372,\"TOTALVOLUME24H\":2277562.4435015908,\"TOTALVOLUME24HTO\":2932839226.314831,\"TOTALTOPTIERVOLUME24H\":2275742.740814696,\"TOTALTOPTIERVOLUME24HTO\":2930498579.1427317,\"IMAGEURL\":\"/media/37746238/eth.png\"}}},\"DISPLAY\":{\"ETH\":{\"USD\":{\"FROMSYMBOL\":\"Ξ\",\"TOSYMBOL\":\"$\",\"MARKET\":\"CryptoCompare Index\",\"PRICE\":\"$ 1,286.28\",\"LASTUPDATE\":\"Just now\",\"LASTVOLUME\":\"Ξ 0.6900\",\"LASTVOLUMETO\":\"$ 886.96\",\"LASTTRADEID\":\"14326775\",\"VOLUMEDAY\":\"Ξ 61,991.8\",\"VOLUMEDAYTO\":\"$ 79,153,635.8\",\"VOLUME24HOUR\":\"Ξ 454,367.7\",\"VOLUME24HOURTO\":\"$ 587,700,307.0\",\"OPENDAY\":\"$ 1,276.71\",\"HIGHDAY\":\"$ 1,286.65\",\"LOWDAY\":\"$ 1,265.42\",\"OPEN24HOUR\":\"$ 1,307.86\",\"HIGH24HOUR\":\"$ 1,317.79\",\"LOW24HOUR\":\"$ 1,262.94\",\"LASTMARKET\":\"lmax\",\"VOLUMEHOUR\":\"Ξ 4,689.13\",\"VOLUMEHOURTO\":\"$ 6,022,848.7\",\"OPENHOUR\":\"$ 1,281.74\",\"HIGHHOUR\":\"$ 1,286.65\",\"LOWHOUR\":\"$ 1,281.48\",\"TOPTIERVOLUME24HOUR\":\"Ξ 454,367.7\",\"TOPTIERVOLUME24HOURTO\":\"$ 587,700,307.0\",\"CHANGE24HOUR\":\"$ -21.58\",\"CHANGEPCT24HOUR\":\"-1.65\",\"CHANGEDAY\":\"$ 9.57\",\"CHANGEPCTDAY\":\"0.75\",\"CHANGEHOUR\":\"$ 4.54\",\"CHANGEPCTHOUR\":\"0.35\",\"CONVERSIONTYPE\":\"direct\",\"CONVERSIONSYMBOL\":\"\",\"SUPPLY\":\"Ξ 122,627,429.5\",\"MKTCAP\":\"$ 157.73 B\",\"MKTCAPPENALTY\":\"0 %\",\"CIRCULATINGSUPPLY\":\"Ξ 122,627,429.5\",\"CIRCULATINGSUPPLYMKTCAP\":\"$ 157.73 B\",\"TOTALVOLUME24H\":\"Ξ 2.28 M\",\"TOTALVOLUME24HTO\":\"$ 2.93 B\",\"TOTALTOPTIERVOLUME24H\":\"Ξ 2.28 M\",\"TOTALTOPTIERVOLUME24HTO\":\"$ 2.93 B\",\"IMAGEURL\":\"/media/37746238/eth.png\"}}}}")
	////
	//fmt.Println(h)
	////
	////
	//////ht, _ :=  strconv.ParseInt(h.String(), 16, 64)
	////
	//fmt.Println(h.String())
	////big.NewInt(uint(ht))
}
